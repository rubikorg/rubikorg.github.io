<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>Write your first Rubik app :: Rubik | An efficient framework for Go — Welcome to Rubik Docs</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="This tutorial is going to be a really exciting one because you&amp;rsquo;ll interact with Rubik and it&amp;rsquo;s ecosystem direactly.
So in the last tutorial we created a project called helloworld and we ran it using the okrubik CLI. Using that project as a base we are not only going to create a TODO-App backend but we are also going to analyze the whole structure of this Rubik app so let&amp;rsquo;s fasten our seatbelts and Go."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/guides/todo-example/" />


<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<link href="https://fonts.googleapis.com/css?family=Spectral|Muli:900|Oxygen+Mono&display=swap" rel="stylesheet">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Write your first Rubik app"/>
<meta name="twitter:description" content="In this guide you&#39;ll learn how to set-up a Rubik project and run the server"/>



<meta property="og:title" content="Write your first Rubik app" />
<meta property="og:description" content="In this guide you&#39;ll learn how to set-up a Rubik project and run the server" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/guides/todo-example/" />
<meta property="article:published_time" content="2020-05-31T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2020-05-31T00:00:00&#43;00:00"/><meta property="og:site_name" content="Rubik | An efficient framework for Go" />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/guides/getting-started" class="logo" style="text-decoration: none;">
  
    <img src="/img/icon.png" alt="" />
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
            <li><a href="/guides">Guides</a></li>
        
      
        
            <li><a href="https://pkg.go.dev/github.com/rubikorg/rubik?tab=doc">API Docs</a></li>
        
      
        
            <li><a href="https://github.com/rubikorg/rubik">Source Code</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/guides">Guides</a></li>
      
    
      
        <li><a href="https://pkg.go.dev/github.com/rubikorg/rubik?tab=doc">API Docs</a></li>
      
    
      
        <li><a href="https://github.com/rubikorg/rubik">Source Code</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg viewBox='0 0 40 40' width='80'>
            <path d='M1 1h8M1 4h 8M1 7h8' 
                  stroke='#202020' 
                  stroke-width='1' 
                  stroke-linecap='round'/>
          </svg>
        </span>
      
      
    </span>
  </span>
</header>


      <div class="content">
        
  <div class="post">
    <h2 class="post-title"><a href="/guides/todo-example/">Write your first Rubik app</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2020-05-31
        </span>
      
      <span class="post-author">— Written by Ashish Shekar</span>
      
        <span class="post-read-time">— 3 min read</span>
      
    </div>

    

    

    <div class="post-content">
      

<p>This tutorial is going to be a really exciting one because you&rsquo;ll interact with Rubik and it&rsquo;s ecosystem
direactly.</p>

<p>So in the <a href="/guides/create-project">last tutorial</a> we created a project called <code>helloworld</code> and we ran it
using the <code>okrubik</code> CLI. Using that project as a base we are not only going to create a TODO-App backend but
we are also going to analyze the whole structure of this Rubik app so let&rsquo;s fasten our seatbelts and <code>Go</code>.</p>

<h2 id="project-structure">Project Structure</h2>

<p>The file/directory structure of the initial Rubik app is shown below:</p>

<table>
<thead>
<tr>
<th>File/Folder</th>
<th>Purpose</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>main.go</code></td>
<td>The entrypoint of your Rubik server. This is where your config is loaded and server is started.</td>
</tr>

<tr>
<td><code>config/</code></td>
<td>The TOML configurations of your project is placed here. <code>decl.go</code> is the declaration of your config.</td>
</tr>

<tr>
<td><code>routers/</code></td>
<td>Routers hold group of routes. Routers are grouped by responsibilities/domains in rubik.</td>
</tr>

<tr>
<td><code>routers/*/route.go</code></td>
<td>This file handles the creation of router and addition of routes under this domain.</td>
</tr>

<tr>
<td><code>routers/*/controller.go</code></td>
<td>Corresponding controllers of all routes under this domain can be located here.</td>
</tr>

<tr>
<td><code>routers/import.go</code></td>
<td>This file contains <code>Import</code> function which is the entripoint of all Routers into Rubik.</td>
</tr>

<tr>
<td><code>static/</code></td>
<td>This folder contains all the files that you want to serve statically under <code>/static</code> prefix path.</td>
</tr>

<tr>
<td><code>templates/</code></td>
<td>This folder holds files used for redering template as response.</td>
</tr>

<tr>
<td><code>storage/</code></td>
<td>This folder all files that can be organized and stored using the <code>Storage</code> API of Rubik.</td>
</tr>
</tbody>
</table>

<h2 id="generate-a-router">Generate a Router</h2>

<p>We now know the purpose of each files inside this project, now let&rsquo;s create our <code>todo</code> router:</p>

<pre><code class="language-bash">okrubik gen router -n todo
</code></pre>

<p>This will generate a folder inside <code>./routers/todo</code> and generate our route.go and controller.go file.
In Rubik, routers can be thought of as a subsystem having one purpose OR domain-driven. The purpose of our <code>todo</code>
router is to only interact with the TODO part of our application.</p>

<p>Let&rsquo;s navigate to <code>route.go</code> inside our todo folder that we just created. You&rsquo;ll see something like this:</p>

<pre><code class="language-go">package todo

import (
	r &quot;github.com/rubikorg/rubik&quot;
)

// Router for /todo routes
var Router = r.Create(&quot;/todo&quot;)

var indexRoute = r.Route{
	Path:       &quot;/&quot;,
	Controller: indexCtl,
}

func init() {
	Router.Add(indexRoute)
}
</code></pre>

<p>Let&rsquo;s break each line down and get to know it&rsquo;s meaning. Unlike any other frameworks out there Rubik tries
to be descriptive and easy to read.</p>

<ul>
<li>We are declaring <code>indexRoute</code> as a type of <code>rubik.Route</code></li>
<li>with <code>Path</code> pointing to the root of this router and</li>
<li><code>Controller</code> assigned as <code>indexCtl</code>.</li>
<li>We then add this <code>indexRoute</code> to this <code>Router</code> using the <code>Add</code> method so that this route becomes a part of todo Router.</li>
</ul>

<h2 id="add-a-todo">Add a TODO</h2>

<p>For persistance we are going to use a simple [SQLite]() module for Go and save our todo into a <code>.sqlite</code> file. Let&rsquo;s create
a new add route inside our <code>todo/route.go</code>.</p>

<pre><code class="language-go">var addRoute = r.Route{
	Path:       &quot;/add&quot;,
	Controller: addCtl,
}

func init() {
    Router.Add(indexRoute)
    // ADD This to route to our router
    Router.Add(addRoute)
}
</code></pre>

<p>Let&rsquo;s create our controller called <code>addCtl</code> inside our <code>todo/controller.go</code>.</p>

<pre><code class="language-go">func addCtl(req *Request) {
    req.Respond(&quot;I am the add route for TODO app&quot;)
}
</code></pre>

<p>Now let&rsquo;s run our server by doing <code>okrubik run -a server</code> and going to <a href="http;//localhost:4000/todo/add">http;//localhost:4000/todo/add</a>. You&rsquo;ll see the reponse that you have returned using the <code>Respond()</code> method.</p>

    </div>
    
      <div class="pagination">
        
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/guides/create-project/">
                <span class="button__icon">←</span>
                <span class="button__text">Create a Rubik Project</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="/guides/navigating-docs/">
                <span class="button__text">Sources of Rubik</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
    <div class="copyright copyright--user">
      <span>Caught a mistake or want to contribute to the documentation? - <a target="_blank" href="https://github.com/rubikorg/rubikorg.github.io">Edit on GitHub!</a></span>
      <span>© Ashish Shekar 2020</span>
    </div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
